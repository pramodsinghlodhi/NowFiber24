
# Firestore Database Setup Guide

This guide provides step-by-step instructions on how to populate your Cloud Firestore database using the JSON files in this directory. Following these steps is crucial for the application to function correctly.

## Before You Start

- Make sure you have created a Firebase project and enabled Firestore Database (in Test Mode) as described in the main `README.md` file.
- You should be in the **Firestore Database** -> **Data** tab in your [Firebase Console](https://console.firebase.google.com/).

---

## Step 1: Set up the `users` Collection (Crucial)

This is the most important collection to set up correctly, as it links your authentication users to their profiles in the database.

1.  **Create Users First**: Go to the **Authentication** -> **Users** tab in your Firebase Console and create at least one "Admin" and one "Technician" user as outlined in the main `README.md`.
2.  **Get User UIDs**: After creating the users, copy the **User UID** for each user. This is a unique ID generated by Firebase (e.g., `f10a8f7c-4876-47a9-8354-9031c51322b8`).
3.  **Create `users` Collection**:
    *   Go back to the **Firestore Database** -> **Data** tab.
    *   Click **+ Start collection**.
    *   For **Collection ID**, enter `users`.
    *   Click **Next**.

4.  **Add Admin User Document**:
    *   Now, you'll create the first document. In the **Document ID** field, **paste the User UID you copied for your admin user**.
    *   Open the `users.json` file. Find the object with `"id": "admin"`.
    *   Add each field from that JSON object to your Firestore document:
        -   `id`: (string) `admin`
        -   `name`: (string) `Admin User`
        -   `role`: (string) `Admin`
        -   `isBlocked`: (boolean) `false`
        -   `avatarUrl`: (string) `https://i.pravatar.cc/150?u=admin`
        -   `contact`: (string) `+15551234567`
    *   Click **Save**.

5.  **Add Technician User Document**:
    *   Click **+ Add document**.
    *   In the **Document ID** field, **paste the User UID you copied for your technician user**.
    *   Open `users.json` again. Find the object with `"id": "tech-001"`.
    *   Add each field from that JSON object to your Firestore document.
    *   Click **Save**.

Repeat this process for any other users you create.

---

## Step 2: Set up Remaining Collections

For the following collections, the Document ID can be copied directly from the JSON files. The process is the same for each file.

### General Process:

1.  In Firestore, click **+ Start collection**.
2.  Enter the correct **Collection ID** (e.g., `technicians`).
3.  Open the corresponding JSON file (e.g., `technicians.json`).
4.  For each top-level key in the JSON file (e.g., `"tech-001"`):
    *   Click **+ Add document**.
    *   Use the key as the **Document ID** (e.g., `tech-001`).
    *   Copy all the fields and values from the JSON object into the Firestore document fields.
    *   **For nested objects** like `attributes` in the `infrastructure.json` file, you will first add a field with the key `attributes`, set its type to `map`, and then add the nested fields and values inside that map.
5.  Click **Save**. Repeat for all entries in the file.

### Collections to Create:

-   `technicians` (from `technicians.json`)
-   `tasks` (from `tasks.json`)
-   `alerts` (from `alerts.json`)
-   `infrastructure` (from `infrastructure.json`)
-   `connections` (from `connections.json`)
-   `materials` (from `materials.json`)
-   `assignments` (from `assignments.json`)
-   `referrals` (from `referrals.json`)
-   `plans` (from `plans.json`)

---

Once you have created all these collections and their documents, your application will be fully populated with the initial data and ready to run.
