# Firestore Database Setup Guide

This guide provides step-by-step instructions on how to populate your Cloud Firestore database using the JSON files in this directory. Following these steps is crucial for the application to function correctly.

## Before You Start

- Make sure you have created a Firebase project and enabled all necessary services as described in the main `README.md` file.

---

## Part 1: Create User Accounts & Link to Firestore (Most Important Step)

This is the most critical part of the setup. You must create a user in Firebase's authentication system and then create a corresponding profile document for them in the Firestore database. The application links these two records using a unique ID generated by Firebase called a **UID**.

### Step 1.1: Create the "Admin" User in Firebase Authentication

1.  Go to the **Authentication** -> **Users** tab in your Firebase Console.
2.  Click **"Add user"**.
3.  Enter the following:
    *   **Email**: `admin@fibervision.com`
    *   **Password**: `admin` (or any password of your choice, must be 6+ characters)
4.  Click **"Add user"**.

### Step 1.2: Get the Admin's User UID

1.  After the user is created, you will see them in the user list.
2.  **Copy the User UID** for this `admin@fibervision.com` user. It's a long string of letters and numbers (e.g., `aBcDeFgHiJkLmNoPqRsTuVwXyZ12`). This is **not** the same as their email or their User ID.

### Step 1.3: Create the Admin's Profile in Firestore

1.  Go to the **Firestore Database** -> **Data** tab in the Firebase Console.
2.  Click **+ Start collection**.
3.  For **Collection ID**, enter `users`. Click **Next**.
4.  Now, you'll create the first document. In the **Document ID** field, **paste the Admin User UID you just copied**. This is how the app links the login to the profile.
5.  Now, add the fields for the admin's profile. You can copy these from the `users.json` file (find the object where `"id": "admin"`).
    *   `id`: (string) `admin`
    *   `name`: (string) `Admin User`
    *   `role`: (string) `Admin`
    *   `isBlocked`: (boolean) `false`
    *   `avatarUrl`: (string) `https://i.pravatar.cc/150?u=admin`
    *   `contact`: (string) `+15551234567`
6.  Click **Save**.

### Step 1.4: Repeat for a Technician User

1.  Go back to **Authentication** and **Add user**:
    *   **Email**: `tech-001@fibervision.com`
    *   **Password**: `password`
2.  **Copy the new User UID** for this technician.
3.  Go back to the `users` collection in **Firestore** and click **+ Add document**.
4.  **Paste the Technician's UID** as the Document ID.
5.  Add the fields from the `users.json` object where `"id": "tech-001"`.
    *   `id`: (string) `tech-001`
    *   `name`: (string) `John Doe`
    *   `role`: (string) `Technician`
    *   `isBlocked`: (boolean) `false`
    *   `avatarUrl`: (string) `https://i.pravatar.cc/150?u=tech-001`
    *   `contact`: (string) `+15558765432`
6.  Click **Save**.

You must repeat this process for any other users you wish to add from the `users.json` file.

---

## Part 2: Set up Remaining Collections

For the following collections, the Document ID can be copied directly from the JSON files.

### General Process:

1.  In Firestore, click **+ Start collection**.
2.  Enter the correct **Collection ID** (e.g., `technicians`).
3.  Open the corresponding JSON file (e.g., `technicians.json`).
4.  For each top-level key in the JSON file (e.g., `"tech-001"`):
    *   Click **+ Add document**.
    *   Use the key as the **Document ID** (e.g., `tech-001`).
    *   Copy all the fields and values from the JSON object into the Firestore document fields.
    *   **For nested objects** like `attributes` in the `infrastructure.json` file, you will first add a field with the key `attributes`, set its type to `map`, and then add the nested fields and values inside that map.
5.  Click **Save**. Repeat for all entries in the file.

### Collections to Create:

-   `technicians` (from `technicians.json`)
-   `tasks` (from `tasks.json`)
-   `alerts` (from `alerts.json`)
-   `infrastructure` (from `infrastructure.json`)
-   `connections` (from `connections.json`)
-   `materials` (from `materials.json`)
-   `assignments` (from `assignments.json`)
-   `referrals` (from `referrals.json`)
-   `plans` (from `plans.json`)

---

Once you have created all these collections and their documents, your application will be fully populated with the initial data and ready to run.
