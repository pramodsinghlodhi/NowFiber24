# Firestore Database Setup Guide

This guide provides step-by-step instructions on how to populate your Cloud Firestore database using the JSON files in this directory. Following these steps is crucial for the application to function correctly.

## Before You Start

- Make sure you have created a Firebase project and enabled Firestore Database (in Test Mode) as described in the main `README.md` file.
- You should be in the **Firestore Database** -> **Data** tab in your [Firebase Console](https://console.firebase.google.com/).

---

## Step 1: Set up the `users` Collection (Crucial)

This is the most important collection to set up correctly, as it links your authentication users to their profiles in the database.

1.  **Create Users First**: Go to the **Authentication** -> **Users** tab in your Firebase Console and create at least one "Admin" and one "Technician" user as outlined in the main `README.md`.
2.  **Get User UIDs**: After creating the users, copy the **User UID** for each user. This is a unique ID generated by Firebase (e.g., `f10a8f7c-4876-47a9-8354-9031c51322b8`).
3.  **Create `users` Collection**:
    *   Go back to the **Firestore Database** -> **Data** tab.
    *   Click **+ Start collection**.
    *   For **Collection ID**, enter `users`.
    *   Click **Next**.

4.  **Add Admin User Document**:
    *   Now, you'll create the first document. In the **Document ID** field, **paste the User UID you copied for your admin user**.
    *   Open the `users.json` file. Find the object with `"id": "admin"`.
    *   Add each field from that JSON object to your Firestore document:
        -   `id`: (string) `admin`
        -   `name`: (string) `Admin User`
        -   `role`: (string) `Admin`
        -   `isBlocked`: (boolean) `false`
        -   `avatarUrl`: (string) `https://i.pravatar.cc/150?u=admin`
        -   `contact`: (string) `+15551234567`
    *   Click **Save**.

5.  **Add Technician User Document**:
    *   Click **+ Add document**.
    *   In the **Document ID** field, **paste the User UID you copied for your technician user**.
    *   Open `users.json` again. Find the object with `"id": "tech-001"`.
    *   Add each field from that JSON object to your Firestore document.
    *   Click **Save**.

Repeat this process for any other users you create.

---

## Step 2: Set up Remaining Collections

For the following collections, the Document ID can be copied directly from the JSON files.

### `technicians` Collection

1.  In Firestore, click **+ Start collection**.
2.  **Collection ID**: `technicians`.
3.  Open `technicians.json`. For each entry (e.g., `"tech-001"`), click **+ Add document**.
4.  Use the key as the **Document ID** (e.g., `tech-001`).
5.  Copy all the fields and values from the corresponding JSON object into the Firestore document fields.
6.  Click **Save**. Repeat for all technicians.

### `tasks` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `tasks`.
3.  Open `tasks.json`. For each entry (e.g., `"task-1"`), click **+ Add document**.
4.  Use the key as the **Document ID** (e.g., `task-1`).
5.  Copy all the fields and values.
6.  Click **Save**. Repeat for all tasks.

### `alerts` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `alerts`.
3.  Open `alerts.json`. Follow the same process to add each alert as a new document.

### `infrastructure` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `infrastructure`.
3.  This collection has many items. Open `infrastructure.json`.
4.  For each entry (e.g., `"OLT-01"`, `"SPL-01"`), create a new document using the key as the **Document ID**.
5.  Carefully copy all fields, including the nested `attributes` object. When you add a field, you can set its type to `map` for the `attributes` object, and then add the fields inside it.

### `connections` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `connections`.
3.  Open `connections.json` and add each connection as a new document.

### `materials` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `materials`.
3.  Open `materials.json` and add each material as a new document.

### `assignments` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `assignments`.
3.  Open `assignments.json` and add each assignment as a new document.

### `referrals` Collection

1.  Click **+ Start collection**.
2.  **Collection ID**: `referrals`.
3.  Open `referrals.json` and add each referral as a new document.

---

Once you have created all these collections and their documents, your application will be fully populated with the initial data and ready to run.